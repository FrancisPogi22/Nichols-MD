class PredictiveSearch{constructor(e,s){this.input=document.getElementById(e),this.results=document.getElementById(s),this.setupListeners()}setupListeners(){this.input.addEventListener("keyup",this.fetchResults.bind(this))}debounce(e,s){let t;return function(...i){clearTimeout(t),t=setTimeout(()=>{e.apply(this,i)},s)}}fetchResults(){let e=this.debounce(()=>{let e=this.input.value.trim();e.length>0?fetch(`/search/suggest.json?q=${e}`).then(e=>e.json()).then(e=>{if(e?.resources?.results?.products){let s=e.resources.results.products;this.displayResults(s)}else this.clearResults()}).catch(e=>console.error("Error fetching search suggestions:",e)):this.clearResults()},300);e()}displayResults(e){e&&e.length>0?(this.clearResults(),this.results.style.display="block",e.forEach(e=>{this.results.insertAdjacentHTML("beforeend",`<div class="search-widget"><a href="${e.url}"><img src="${e.featured_image.url}" alt="${e.title}"><div class="product-details"><p>${e.title}</p><p>$${e.price}</p></div></a></div>`)})):this.clearResults()}clearResults(){this.results.innerHTML="",this.results.style.display="none"}}const predictiveSearch=new PredictiveSearch("searchInput","search-details-con");